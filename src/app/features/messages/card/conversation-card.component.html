<main
  (click)="switchView()"
  [routerLink]="[conversation()?._id]"
  routerLinkActive="bg-active"
  hlmCard
  class="p-2 flex items-center gap-x-2 cursor-pointer hover:bg-accent"
>
  <!-- AVATAR -->
  <div class="size-lg flex justify-center items-center border rounded-full">
    @if(conversation()?.is_group) { @if(conversation()?.group_picture){} @else {
    <ng-icon hlm size="lg" name="lucideUsersRound" />
    } } @else {
    <!-- AVATAR -->
    <hlm-avatar variant="medium">
      <img
        [src]="imageUrl ?? '/icons/avatar.svg'"
        alt="profile picture"
        hlmAvatarImage
      />
    </hlm-avatar>
    }
  </div>

  <section>
    <!-- Group title -->
    <h1 class="font-medium">{{ conversation()?.group_name }}</h1>
    <!-- Last message -->
    <p class="text-sm">
      @if(conversation()?.is_group) {
      <span *ngFor="let user of conversation()?.participants; let i = index">
        {{
          i + 1 === conversation()?.participants?.length
            ? user.username + ""
            : user.username + ","
        }}
      </span>
      } @else { @for(participant of conversation()!.participants; track $index)
      { @if( participant._id === currentUser()?._id) {
      <span class="text-lg">
        {{ participant.username }}
      </span>
      } } }
    </p>
    <p class="text-sm">
      {{ conversation()?.last_message?.sender?.username + ":" }}
      <span class="text-gray-400">
        {{ conversation()?.last_message?.content }}
      </span>
    </p>
  </section>
</main>
